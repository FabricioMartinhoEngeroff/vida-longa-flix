<!-- Template do item (usado no carrossel por categoria) -->
<ng-template #videoItem let-video>
  <div class="video-card" [attr.id]="'video-' + video.id">
    <div
      class="video-wrapper"
      (mouseenter)="aoPassarMouseVideo(video.id, $event)"
      (mouseleave)="aoSairMouseVideo(video.id, $event)"
      (click)="abrirModal(video)"
    >
      <img
        [src]="video.capa"
        [alt]="video.title"
        class="capa"
        [class.oculta]="mostrandoPrevia[video.id]"
      />

      <div class="play-sobreposto" [class.oculto]="mostrandoPrevia[video.id]">
        <mat-icon>play_circle_filled</mat-icon>
      </div>

      <video
        [src]="video.url"
        muted
        playsinline
        loop
        class="video-previa"
        [class.visivel]="mostrandoPrevia[video.id]"
      ></video>
    </div>

    <div class="info-area">
      <h3>{{ video.title }}</h3>
      <p class="descricao">{{ video.description }}</p>
    </div>

    <app-engajamento-resumo
      [likesCount]="video.likesCount ?? 0"
      [commentsCount]="totalComentarios(video.id)"
      [liked]="video.favorita ?? false"
      (likeClick)="toggleFavorite(video.id)"
      (commentsClick)="abrirModal(video)"
    ></app-engajamento-resumo>
  </div>
</ng-template>

<!-- Carrossel por categoria (web + mobile) -->
<div class="web">
 <app-categoria-carrossel
  *ngFor="let grupo of videosPorCategoria"
  [titulo]="grupo.nome"
  [itens]="grupo.itens"
  [itemTemplate]="videoItem"
  [attr.id]="'cat-' + grupo.nome.toLowerCase().replace(/\s+/g,'-')"
></app-categoria-carrossel>
</div>
